<div class="flex justify-center items-center h-screen bg-gray-100">
  <mat-card appearance="outlined" class="w-full sm:w-full md:w-2/3 lg:w-1/2 xl:w-1/3 h-fit">
    <mat-card-header class="my-2">
      <mat-card-title> Création de compte</mat-card-title>
    </mat-card-header>

    <mat-divider class="my-2"/>

    <mat-card-content>
      <form [formGroup]="formGroup" (submit)="submitForm($event)" class="my-10">
        <mat-form-field class="w-full">
          <mat-label>Nom</mat-label>
          <input matInput class="w-full" formControlName="lastName">
          @if (isFieldInvalid('lastName')) {
            <mat-error>
              Votre nom ne peut pas être vide
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Prenom</mat-label>
          <input matInput class="w-full" formControlName="firstName">
          @if (isFieldInvalid('firstName')) {
            <mat-error>
              Votre prenom ne peut pas être vide
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Email</mat-label>
          <input matInput class="w-full" formControlName="email">
          @if (isFieldInvalid('email')) {
            @if (formGroup.get('email')?.hasError('required')) {
              <mat-error>
                L'identifiant ne peut pas être vide
              </mat-error>
            }

            @if (formGroup.get('email')?.hasError('email')) {
              <mat-error>
                La valeur doit etre un email
              </mat-error>
            }
          }
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Mot de passe</mat-label>
          <input matInput class="w-full" formControlName="password">

          @if (isFieldInvalid('password')) {
            <mat-error>
              Le mot de passe ne peut pas être vide
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field class="w-full mb-9">
          <mat-label>Confirmez votre mot de passe</mat-label>
          <input matInput class="w-full" formControlName="confirmPassword">

          @if (isFieldInvalid('confirmPassword')) {
            <mat-error>
              Le mot de passe ne peut pas être vide
            </mat-error>
          }

          @else if ( !passwordMatch() ) {
            <mat-error>
              Le mot de passe ne correspond pas
            </mat-error>
          }

        </mat-form-field>

        <mat-divider/>

        <mat-card-actions class="grid grid-cols-12 gap-4 !important">
          <button class="col-start-8 col-end-11" mat-flat-button [disabled]="formGroup.invalid || !passwordMatch()"
                  type="submit">Se connecter
          </button>
          <button class="col-start-11 col-end-13" mat-raised-button type="button" (click)="clearFields()">Effacer
          </button>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>
</div>
